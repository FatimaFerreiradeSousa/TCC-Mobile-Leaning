<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Login | ML</title>
        <meta charset="utf-8"/>
        <meta name="format-detection" content="telephone=no" />

        <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css"/>
        <link rel="stylesheet" href="assets/fonts/font-awesome/font-awesome.min.css"/>
        <link rel="stylesheet" type="text/css" href="assets/css/css-index.css"/>
        <script src="bootstrap/js/jquery-2.1.4.min.js"/>
        <script src="assets/js/js-page-login.js"/>
    </h:head>

    <h:body>

        <div class="container">
            <h:messages/>

            <div class="row">
                <div class="col-md-6 col-md-offset-3">

                    <div class="panel panel-login">

                        <div class="panel-heading">
                            <div class="row">
                                <div class="col-xs-6">
                                    <a href="#" class="active" id="login-form-link">Login</a>
                                </div>
                                <div class="col-xs-6">
                                    <a href="#" class="active" id="register-form-link">Cadastre-se</a>
                                </div>
                            </div>
                            <hr/>
                        </div>

                        <div class="panel-body">
                            <div class="row">

                                <div class="col-lg-12">
                                    <h:form id="login-form" role="form" style="display: block">
                                        <div class="form-group">
                                            <h:outputText value="#{controladorUsuario.mensagem}" 
                                                          id="erroLogin" class="text-danger text-error"/>
                                        </div>
                                        
                                        <div class="form-group">
                                            <h:inputText id="username" tabindex="1" class="form-control" pt:placeholder="Login"
                                                         value="#{controladorUsuario.login}" required="true"/>
                                        </div>

                                        <div class="form-group">
                                            <h:inputSecret id="password" tabindex="1" class="form-control" pt:placeholder="**********" 
                                                           value="#{controladorUsuario.senha}" required="true"/>
                                        </div>

                                        <div class="form-group">
                                            <h:selectOneMenu value="#{controladorUsuario.usuario}" class="select-item btn-sm form-control" 
                                                             id="tipo" required="true">
                                                <f:selectItem itemValue="Tipo" />
                                                <f:selectItem itemValue="Aluno" />
                                                <f:selectItem itemValue="Professor" />
                                            </h:selectOneMenu>
                                        </div>

                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-sm-6 col-sm-offset-3">
                                                    <h:commandButton type="submit" action="#{controladorUsuario.loginUsuario()}" 
                                                                     id="login-submit" tabindex="4" 
                                                                     class="form-control btn btn-primary" value="Entrar">
                                                        <f:ajax execute="username password tipo" render="erroLogin"/>
                                                    </h:commandButton>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="text-center">
                                                        <a href="http://phpoll.com/recover" tabindex="5" class="forgot-password">Esqueçeu sua senha?</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </h:form>

                                    <h:form id="register-form" role="form" style="display: none;">
                                        <div class="form-group">
                                            <h:outputText value="#{controladorUsuario.mensagem}" 
                                                          id="erroCadastro" class="text-danger text-error"/>
                                        </div>
                                        
                                        <div class="form-group">
                                            <h:inputText id="login" tabindex="1" class="form-control" pt:placeholder="Login" 
                                                         value="#{controladorUsuario.login}"/>
                                        </div>

                                        <div class="form-group">
                                            <h:inputText id="email" tabindex="1" class="form-control" pt:placeholder="Endereço de email" 
                                                         value="#{controladorUsuario.email}"/>
                                        </div>

                                        <div class="form-group">
                                            <h:inputSecret id="senha" tabindex="1" class="form-control" pt:placeholder="Senha" 
                                                           value="#{controladorUsuario.senha}"/>
                                        </div>

                                        <div class="form-group">
                                            <h:selectOneMenu value="#{controladorUsuario.usuario}" class="select-item btn-sm form-control" id="tipoUsuario">
                                                <f:selectItem itemValue="Tipo" />
                                                <f:selectItem itemValue="Aluno" />
                                                <f:selectItem itemValue="Professor" />
                                            </h:selectOneMenu>
                                        </div>

                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-sm-6 col-sm-offset-3">
                                                    <h:commandButton type="submit" id="register-submit" tabindex="4" 
                                                                     class="form-control btn btn-success" value="Cadastrar"
                                                                     action="#{controladorUsuario.salvarUsuario()}">
                                                        <f:ajax execute="login email senha tipoUsuario" render="erroCadastro"/>
                                                    </h:commandButton>
                                                </div>
                                            </div>
                                        </div>
                                    </h:form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </h:body>
</html>

